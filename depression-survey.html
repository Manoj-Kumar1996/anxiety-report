<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Depression Self-Assessment</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f7f7f7;
            font-family: Arial, sans-serif;
        }

        .question-container {
            display: none;
        }

        .btn-next {
            width: 100%;
        }

        .question-text {
            font-size: 20px;
            margin-bottom: 20px;
        }

        .popup-content {
            text-align: center;
        }

        .popup-content h5 {
            margin-bottom: 20px;
        }

        .popup-content input {
            margin-bottom: 10px;
            width: 100%;
        }

        .popup-content a {
            color: #007bff;
            text-decoration: none;
        }

        .popup-content a:hover {
            text-decoration: underline;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        .active {
            background-color: #007bff;
            color: white;
        }

        .active input {
            display: none;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>
</head>

<body>

    <div class="container ftco-section">
        <div class="row">
            <div class="col-md-6 m-auto">
                <div class="card shadow">
                    <div class="card-body">
                        <h3 class="card-title text-center">Depression Self-Assessment</h3>
                        <form id="depressionForm">

                            <!-- Question 1 -->
                            <div id="question-1" class="question-container fade-in">
                                <p class="question-text">1. Little interest or pleasure in doing things</p>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q1" value="0"> Not at all
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q1" value="1"> Several days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q1" value="2"> More than half the days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q1" value="3"> Nearly every day
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary btn-next"
                                    onclick="nextQuestion(1)">Next</button>
                            </div>

                            <!-- Question 2 -->
                            <div id="question-2" class="question-container fade-in">
                                <p class="question-text">2. Feeling down, depressed, or hopeless</p>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q2" value="0"> Not at all
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q2" value="1"> Several days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q2" value="2"> More than half the days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q2" value="3"> Nearly every day
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary btn-next"
                                    onclick="nextQuestion(2)">Next</button>
                            </div>

                            <!-- Question 3 -->
                            <div id="question-3" class="question-container fade-in">
                                <p class="question-text">3. Trouble falling asleep, staying asleep, or sleeping too much
                                </p>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q3" value="0"> Not at all
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q3" value="1"> Several days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q3" value="2"> More than half the days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q3" value="3"> Nearly every day
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary btn-next"
                                    onclick="nextQuestion(3)">Next</button>
                            </div>

                            <!-- Question 4 -->
                            <div id="question-4" class="question-container fade-in">
                                <p class="question-text">4. Feeling tired or having little energy</p>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q4" value="0"> Not at all
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q4" value="1"> Several days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q4" value="2"> More than half the days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q4" value="3"> Nearly every day
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary btn-next"
                                    onclick="nextQuestion(4)">Next</button>
                            </div>

                            <!-- Question 5 -->
                            <div id="question-5" class="question-container fade-in">
                                <p class="question-text">5. Poor appetite or overeating</p>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q5" value="0"> Not at all
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q5" value="1"> Several days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q5" value="2"> More than half the days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q5" value="3"> Nearly every day
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary btn-next"
                                    onclick="nextQuestion(5)">Next</button>
                            </div>

                            <!-- Question 6 -->
                            <div id="question-6" class="question-container fade-in">
                                <p class="question-text">6. Feeling bad about yourself — or that you are a failure or
                                    have let yourself or your family down</p>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q6" value="0"> Not at all
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q6" value="1"> Several days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q6" value="2"> More than half the days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q6" value="3"> Nearly every day
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary btn-next"
                                    onclick="nextQuestion(6)">Next</button>
                            </div>

                            <!-- Question 7 -->
                            <div id="question-7" class="question-container fade-in">
                                <p class="question-text">7. Trouble concentrating on things, such as reading the
                                    newspaper or watching television</p>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q7" value="0"> Not at all
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q7" value="1"> Several days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q7" value="2"> More than half the days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q7" value="3"> Nearly every day
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary btn-next"
                                    onclick="nextQuestion(7)">Next</button>
                            </div>

                            <!-- Question 8 -->
                            <div id="question-8" class="question-container fade-in">
                                <p class="question-text">8. Moving or speaking so slowly that other people could have
                                    noticed? Or the opposite — being so fidgety or restless that you have been moving
                                    around a lot more than usual</p>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q8" value="0"> Not at all
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q8" value="1"> Several days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q8" value="2"> More than half the days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q8" value="3"> Nearly every day
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary btn-next"
                                    onclick="nextQuestion(8)">Next</button>
                            </div>

                            <!-- Question 9 -->
                            <div id="question-9" class="question-container fade-in">
                                <p class="question-text">9. Thoughts that you would be better off dead, or of hurting
                                    yourself in some way</p>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q9" value="0"> Not at all
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q9" value="1"> Several days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q9" value="2"> More than half the days
                                    </label>
                                </div>
                                <div class="mb-3 answer">
                                    <label class="form-check-label">
                                        <input type="radio" name="q9" value="3"> Nearly every day
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary btn-next"
                                    onclick="nextQuestion(9)">Next</button>
                            </div>

                            <!-- Result Popup -->
                            <div id="resultPopup" style="display: none;">
                                <div class="popup-content">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <button type="button" class="btn btn-primary w-100" data-bs-toggle="modal"
                                                data-bs-target="#introModal">
                                                Show Report
                                            </button>
                                        </div>
                                        <div class="col-md-12 d-flex justify-content-center py-3">
                                            <hr>
                                            <div class="">
                                                <p class="px-3">OR</p>
                                            </div>
                                            <hr>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="input-group mb-3">
                                                
                                                <div class="input-group-append w-100">
                                                    <button id="submitReport" class="btn btn-primary text-white w-100"
                                                        type="button">Download the report</button>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                </div>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="introModal" tabindex="-1" aria-labelledby="introModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="introModalLabel">Depression Assessment Report</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div id="results" class="result-section text-center">
                                <div class="">
                                    <img class="img-fluid" style="width: 60%;" id="survey-img" src="" alt="">
                                </div>
                                <h5>Your Depression Score: <span id="depressionScore"></span></h5>
                                <p id="resultMessage"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="">
                                <p>Category:</p>
                                <ul>
                                    <li>0-4 points: Minimal or no depressive symptoms.</li>
                                    <li>5-9 points: Mild depression.</li>
                                    <li>10-14 points: Moderate depression.</li>
                                    <li>15-19 points: Moderately severe depression.</li>
                                    <li>20-27 points: Severe depression.</li>
                                </ul>
                            </div>
                            <div class="">
                                <p>Important:</p>
                                <ul>
                                    <li>This is a self-assessment tool and is not intended for a formal diagnosis.</li>
                                    <li>If you scored in the moderate to severe range (10 or higher), it may indicate
                                        that you are experiencing significant depressive symptoms. It is recommended
                                        that you speak with a mental health professional for a full assessment and
                                        discuss potential treatment options.</li>
                                    <li>If you are experiencing thoughts of self-harm or suicide, please seek immediate
                                        professional help or contact a helpline at 988.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- SheetJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        let currentQuestion = 1;
        let score = 0;

        // Initially show the first question
        document.getElementById("question-1").style.display = "block";

        function nextQuestion(questionNumber) {
            // Check if an answer is selected for the current question
            let selectedOption = document.querySelector(`input[name="q${questionNumber}"]:checked`);

            if (!selectedOption) {
                // If no option is selected, display a warning message and return
                alert('Please select an answer before moving to the next question.');
                return;
            }

            // Calculate the score for the current question
            score += parseInt(selectedOption.value);

            // Add active class to selected answer and hide input
            const answers = document.querySelectorAll(`#question-${questionNumber} .answer`);
            answers.forEach(answer => {
                const radio = answer.querySelector('input');
                if (radio.checked) {
                    answer.classList.add('active');
                    radio.style.display = 'none';
                }
            });

            // Hide the current question
            document.getElementById(`question-${questionNumber}`).style.display = "none";

            // Move to the next question
            currentQuestion++;
            if (currentQuestion <= 9) {
                let nextQuestionElement = document.getElementById(`question-${currentQuestion}`);
                nextQuestionElement.classList.add('fade-in');
                nextQuestionElement.style.display = 'block';
            } else {
                showResult();
            }
        }

        function showResult() {
            // Initialize result message and image variables
            let resultMessage = "";
            let surveyImg = document.getElementById('survey-img');

            // Check the score and set the result message and image
            if (score <= 4) {
                resultMessage = "Minimal or no depressive symptoms.";
                surveyImg.src = 'https://static.wixstatic.com/media/ab0b6b_aab4785a37924800bf975efdeab665e6~mv2.jpg';  // Image for minimal symptoms
            } else if (score <= 9) {
                resultMessage = "Mild depression.";
                surveyImg.src = 'https://static.wixstatic.com/media/ab0b6b_ec6eeb92dc5d49fa9986ddf15d2b0699~mv2.jpg';  // Image for mild depression
            } else if (score <= 14) {
                resultMessage = "Moderate depression.";
                surveyImg.src = 'https://static.wixstatic.com/media/ab0b6b_00ce7bc131304b6db2df121e50fcbe21~mv2.jpg';  // Image for moderate depression
            } else if (score <= 19) {
                resultMessage = "Moderately severe depression.";
                surveyImg.src = 'https://static.wixstatic.com/media/ab0b6b_d092028fc7874771ad7a6acd5ba0575b~mv2.jpg';  // Image for moderately severe depression
            } else {
                resultMessage = "Severe depression.";
                surveyImg.src = 'https://static.wixstatic.com/media/ab0b6b_182bafcb02254bf39b4816d43fc474ea~mv2.jpg';  // Image for severe depression
            }

            // Update the text content with score and message
            document.getElementById("depressionScore").textContent = score;
            document.getElementById("resultMessage").textContent = resultMessage;

            // Display the result popup
            document.getElementById("resultPopup").style.display = 'block';
        }




        document.getElementById('submitReport').addEventListener('click', (e) => {
            e.preventDefault();

            const score = document.getElementById("depressionScore").textContent;
            const resultMessage = document.getElementById("resultMessage").textContent;

            Swal.fire({
                title: "Download Report",
                text: "Choose a format:",
                icon: "info",
                showCancelButton: true,
                confirmButtonText: "Download PDF",
                cancelButtonText: "Download Excel"
            }).then((result) => {
                if (result.isConfirmed) {
                    generatePDF(score, resultMessage);
                } else {
                    generateExcel(score, resultMessage);
                }
            });
        });

        // Function to generate PDF with Banner and Additional Text
        function generatePDF(score, resultMessage) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const bannerImageURL = "https://static.wixstatic.com/media/ab0b6b_707acea2f6964f61ac3baae0da0dd735~mv2.png"; // Ensure this path is correct

            const img = new Image();
            img.src = bannerImageURL;
            img.crossOrigin = "Anonymous"; // Ensure cross-origin handling for local/remote images

            img.onload = function () {
                doc.addImage(img, "PNG", 10, 10, 190, 40); // Ensure format is PNG if the image is in PNG

                doc.setFontSize(18);
                doc.text("Depression Report", 10, 60);

                doc.setFontSize(12);
                doc.text(`Score: ${score}`, 10, 75);
                doc.text(`Result: ${resultMessage}`, 10, 85);

                // Category Information
                doc.setFontSize(14);
                doc.text("Category:", 10, 100);
                doc.setFontSize(12);
                doc.text("• 0-4 points: Minimal or no depressive symptoms.", 15, 110);
                doc.text("• 5-9 points: Mild depression.", 15, 120);
                doc.text("• 10-14 points: Moderate depression.", 15, 130);
                doc.text("• 15-19 points: Moderately severe depression.", 15, 140);
                doc.text("• 20-27 points: Severe depression.", 15, 150);

                // Important Notes
                doc.setFontSize(14);
                doc.text("Important:", 10, 165);
                doc.setFontSize(12);
                const importantText = [
                    "• This is a self-assessment tool and is not intended for a formal diagnosis.",
                    "• If you scored in the moderate to severe range (10 or higher), it may indicate",
                    "  that you are experiencing significant depressive symptoms. It is recommended",
                    "  that you speak with a mental health professional for a full assessment and",
                    "  discuss potential treatment options.",
                    "• If you are experiencing thoughts of self-harm or suicide, please seek immediate",
                    "  professional help or contact a helpline at 988.",
                ];
                let yPosition = 175;
                importantText.forEach((line) => {
                    doc.text(line, 15, yPosition);
                    yPosition += 8; // Space between lines
                });

                doc.save("Depression_Report.pdf");
            };

            img.onerror = function () {
                alert("Failed to load banner image. Please check the path or file format.");
            };
        }

        // Function to generate Excel
        function generateExcel(score, resultMessage) {
            const wb = XLSX.utils.book_new();
            const wsData = [
                ["Depression Report"],
                ["Score", score],
                ["Result", resultMessage],
                [],
                ["Category"],
                ["0-4 points", "Minimal or no depressive symptoms."],
                ["5-9 points", "Mild depression."],
                ["10-14 points", "Moderate depression."],
                ["15-19 points", "Moderately severe depression."],
                ["20-27 points", "Severe depression."],
                [],
                ["Important"],
                ["This is a self-assessment tool and is not intended for a formal diagnosis."],
                ["If you scored in the moderate to severe range (10 or higher), it may indicate that you are experiencing significant depressive symptoms. It is recommended that you speak with a mental health professional for a full assessment and discuss potential treatment options."],
                ["If you are experiencing thoughts of self-harm or suicide, please seek immediate professional help or contact a helpline at 988."]
            ];
            const ws = XLSX.utils.aoa_to_sheet(wsData);
            XLSX.utils.book_append_sheet(wb, ws, "Report");
            XLSX.writeFile(wb, "Depression_Report.xlsx");
        }


    </script>

</body>

</html>